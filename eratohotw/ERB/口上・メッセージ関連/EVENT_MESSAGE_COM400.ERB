;-------------------------------------------------
;403休憩
;-------------------------------------------------
@MESSAGE_COM403
IF TARGET > 0
	IF CFLAG:TARGET:睡眠
		PRINTDATAL
			DATAFORM %PARSE("You take")% a rest while looking at %CALLNAME:TARGET%'s sleeping face.
			DATAFORM %PARSE("You decide")% to take a break next to the sleeping %CALLNAME:TARGET%.
		ENDDATA
	ELSE
		PRINTDATAL
			DATAFORM %PARSE("You")% and %CALLNAME:TARGET% take a breather.
			DATAFORM %PARSE("You")% and %CALLNAME:TARGET% decide to take a break.
		ENDDATA
	ENDIF
ELSE
	PRINTDATAL
		DATAFORM %PARSE("You take")% a breather.
		DATAFORM %PARSE("You decide")% to take a break.
		DATAFORM %PARSE("You think")% about what to do next.
		DATAFORM %PARSE("You close your")% eyes for just a moment and %PARSE("notice")% that time has advanced a bit.
	ENDDATA
ENDIF
;-------------------------------------------------
;404追い払う
;-------------------------------------------------
;@MESSAGE_COM404
;LOCAL = ABS(TFLAG:193)
;IF TFLAG:193 > 0
;	PRINTFORML %CALLNAME:PLAYER%は\@ TARGET ? %CALLNAME:TARGET%と協力して #  \@%STR:(200 + LOCAL)%を追い払った
;	PRINTFORML   ― %STR:(200 + LOCAL)%は神霊廟へ帰って行きました ―
;ELSE
;	PRINTFORML %CALLNAME:PLAYER%は\@ TARGET ? %CALLNAME:TARGET%と協力して #  \@%STR:(200 + LOCAL)%を追い払おうとした
;	PRINTFORML %STR:(200 + LOCAL)%は何食わぬ顔で%CALLNAME:PLAYER%\@ TARGET ? 達 #  \@を見つめている…
;ENDIF

;-------------------------------------------------
;410,掃除
;-------------------------------------------------
@MESSAGE_COM410
IF FLAG:562 == 1
PRINTFORML Once %PARSE("you")% finally got done with the cleaning, %PARSE("you",1)% called the residents to the living room for a lecture.
PRINTFORML With this then hopefully they'll clean up after themselves for a while...
FLAG:562 = 0
ELSE
IF FLAG:70
	LOCAL:3 = 0
	FOR LOCAL,1,CHARANUM
		SIF CFLAG:LOCAL:同室
			LOCAL:3 ++
	NEXT
	IF LOCAL:3 ;bugfix
		LOCALS = While trying to ignore %CALLNAME:TARGET% \@ LOCAL:3 > 1 ? with others who are # who is \@ still frozen in time, %PARSE("you")% 
	ELSE
		LOCALS = %PARSE("You")% 
	ENDIF
ELSEIF TFLAG:193 && !CFLAG:睡眠 && !CFLAG:うふふ
	LOCALS = %PARSE("You")% and %CALLNAME:TARGET% 
ELSEIF CFLAG:うふふ
	LOCALS = While neglecting %CALLNAME:TARGET%, %PARSE("you")% 
ELSE
	LOCALS = %PARSE("You")% 
ENDIF
IF OUTROOF(CFLAG:MASTER:現在位置) && DAY:2 == 4
	SELECTCASE TFLAG:194
		CASE 0
			PRINTFORML %LOCALS% thoroughly removed the snow from the road so that no one would accidentally slip on it.
		CASE 1
			PRINTFORML %LOCALS% shoveled away the snow.
		CASE 2
			PRINTFORML %LOCALS% made a clean path as if using a snow plow just to be able to get anywhere.
			PRINTFORML The place is still filled with snow.
		CASE 3
			IF TALENT:MASTER:清掃中毒
				PRINTFORML %PARSE("You")% kept working with a shine in %PARSE("your",1)% eyes while cleaning up the overwhelming amount of snow.
				PRINTFORML The place is still filled with snow.
			ELSE
				PRINTFORML %LOCALS% got tired from cleaning an overwhelming amount of snow, but kept working still.
				PRINTFORML The place is still filled with snow.
			ENDIF
	ENDSELECT
ELSEIF OUTROOF(CFLAG:MASTER:現在位置)
	SELECTCASE TFLAG:194
		CASE 0
			PRINTFORML %LOCALS% swept away some trash and made the place look cleaner.
		CASE 1
			PRINTFORML %LOCALS% swept away some of the trash with a broom.
		CASE 2
			PRINTFORML %LOCALS% gathered all the trash and threw it into the garbage bag one by one.
			PRINTFORML The place is still a bit messy.
		CASE 3
			IF TALENT:MASTER:清掃中毒
				PRINTFORML %PARSE("You")% kept working with a shine in your eyes while cleaning up the overwhelming amount of garbage.
				PRINTFORML The place is still a bit messy.
			ELSE
				PRINTFORML %LOCALS% got tired from cleaning an overwhelming amount of garbage, but kept working.
				PRINTFORML The place is still a bit messy.
			ENDIF
	ENDSELECT
ELSE
	SELECTCASE TFLAG:194
		CASE 0
			IF TALENT:MASTER:汚臭耐性 < 0
				PRINTFORML %LOCALS% carefully and thoroughly tidied up every corner.
			ELSE
				PRINTFORML %LOCALS% wiped off dirty places with the dust cloth.
			ENDIF
		CASE 1
			PRINTFORML %LOCALS% cleaned up the surroundings with a broom and a dustpan.
		CASE 2
			IF TALENT:MASTER:汚臭耐性 > 0 && CFLAG:MASTER:現在位置 == 15
				PRINTFORML %LOCALS% gathered all the garbage and pushed it into the closet.
				PRINTFORML The place is still a bit messy.
			ELSE
				PRINTFORML %LOCALS% gathered all the garbage and threw it in a wastebasket.
				PRINTFORML The place is still a bit messy.
			ENDIF
		CASE 3
			IF TALENT:MASTER:清掃中毒
				PRINTFORML %PARSE("You")% kept working with a shine in %PARSE("your",1)% eyes while cleaning up the overwhelming amount of garbage.
				PRINTFORML The place is still a bit messy.
			ELSE
				PRINTFORML %LOCALS% got tired from cleaning an overwhelming amount of garbage, but kept working still.
				PRINTFORML The place is still a bit messy.
			ENDIF
	ENDSELECT
ENDIF
IF TALENT:MASTER:清掃中毒
	PRINTFORML %PARSE("Your")% face turned bright red from the pleasure of cleaning, tears of joy were shed as %PARSE("you",1)% kept cleaning
	PRINTFORM %PARSE("You")% became completely entranced and stopped paying attention to what %PARSE("you",2)% were doing
	IF CFLAG:MASTER:現在位置 == 3
		PRINTFORMW and almost used the donation box as a wastebasket.
		PRINTFORML That was close...
	;食卓分岐
	ELSEIF CFLAG:MASTER:現在位置 == 9 || CFLAG:MASTER:現在位置 == 27 || CFLAG:MASTER:現在位置 == 41
		PRINTFORML and just kept wiping with the dish cloth.
		PRINTFORML If left alone, %PARSE("you")% would probably keep doing this forever.
	;倉庫、押入れ分岐
	ELSEIF CFLAG:MASTER:現在位置 == 6 || CFLAG:MASTER:現在位置 == 18 || CFLAG:MASTER:現在位置 == 35 || CFLAG:MASTER:現在位置 == 51
		PRINTFORML and just kept reordering things loudly over and over.
		PRINTFORML If left alone, %PARSE("you")% would probably keep doing this forever.
	ELSE
		PRINTFORML and just kept swishing the dust cloth back and forth audibly.
		PRINTFORML If left alone, %PARSE("you")% would probably keep doing this forever.
	ENDIF
ELSEIF CFLAG:うふふ && SHIRAHU(TARGET)
	PRINTFORML %PARSE("You feel")% a cold glare strike %PARSE("your",1)% back, but %PARSE("decide")% to ignore it.
ENDIF
IF STRLENS(TSTR:2)
	WAIT
	PRINTFORML Found someone's %TSTR:2%.
	PRINT [0] - Steal them [1] - Don't
	INPUT
	IF !RESULT
		PRINTFORML %PARSE("You steal")% the %CAPITALIZE(TSTR:2)%.
		CALL PANTS_GETTING(FOUND_PANTS_OWNER, FOUND_PANTS_TYPE)
	ELSE
		TSTR:3 =
		PRINTFORML %PARSE("You throw")% the %CAPITALIZE(TSTR:2)% in the laundry.
	ENDIF
ENDIF

SIF !TFLAG:193 && TARGET > 0 && !CFLAG:睡眠 && !FLAG:70
	PRINTFORML %CALLNAME:TARGET% watches %PARSE("you")% work admiringly.
ENDIF
;-------------------------------------------------
;411,戦闘訓練
;-------------------------------------------------
@MESSAGE_COM411
PRINTFORM 
IF TARGET > 0
	IF ABL:MASTER:戦闘能力 > ABL:TARGET:戦闘能力
		PRINTFORM While advising %CALLNAME:TARGET%, 
	ELSE
		PRINTFORM Under the supervision of %CALLNAME:TARGET%, 
	ENDIF
ENDIF
PRINTFORM %PARSE("You")% 
IF !TFLAG:194
	PRINTL practiced some danmaku.
ELSE
	SELECTCASE TIME:5
		CASE 4,6
			PRINTL practiced danmaku in the middle of the rain.
			PRINTL It was extremely tiring.
		CASE 1
			IF TFLAG:194 == 3
				PRINTL practiced danmaku under the harsh sun.
				PRINTW At this rate a heatstroke is unavoidable...
			ELSE
				PRINTL practiced danmaku beneath the cloudless, vast blue sky.
			ENDIF
		CASE 5
			PRINTL practiced danmaku relentlessly in the middle of the torrential downpour.
			PRINTW It was exhausting past the point of death...
		CASE 8,10,12,13
			PRINTL practiced danmaku in the middle of the snow-storm.
			PRINTL It was incredibly tiring...
		CASE 9
			PRINTL practiced danmaku relentlessly in the middle of the blizzard.
			PRINTW It was exhausting past the point of death...
		CASEELSE
			PRINTL practiced some danmaku.
	ENDSELECT
ENDIF
IF TALENT:MASTER:形状 == 4
	IF ABL:MASTER:戦闘能力 == 0
		PRINTFORML %PARSE("You feel")% like %PARSE("you",1)% can control the light from %PARSE("your",1)% crotch with a bit of training.
	ELSEIF ABL:MASTER:戦闘能力 == 1
		PRINTFORML %PARSE("You feel")% like %PARSE("you",1)% can use %PARSE("your",1)% dick-light to blind opponents during fights.
	ELSEIF ABL:MASTER:戦闘能力 == 2
		PRINTFORML %PARSE("You feel")% like more light is converging in %PARSE("your",1)% dick.
	ELSEIF ABL:MASTER:戦闘能力 == 3
		PRINTFORML It's becoming possible to combine %PARSE("your")% dick-light with %PARSE("your",1)% danmaku.
	ELSEIF ABL:MASTER:戦闘能力 == 4
		PRINTFORML It's becoming possible to combine %PARSE("your")% dick-light blinding ability with regular danmaku.
	ELSEIF ABL:MASTER:戦闘能力 == 5
		PRINTFORML %PARSE("Your")% dick-beam is approaching Master Spark-levels.
	ELSEIF ABL:MASTER:戦闘能力 >= 6
		PRINTFORML %PARSE("Your")% danmaku skill is top of the line.
	ENDIF
ENDIF
SIF ABL:MASTER:戦闘能力 > 2 && TARGET > 0
	PRINTFORML %CALLNAME:TARGET% is impressed by %PARSE("your")% strength.
SIF ABL:MASTER:戦闘能力 < ABL:TARGET:戦闘能力 - 2
	PRINTFORML %CALLNAME:TARGET%'s teaching proved invaluable.
SIF TFLAG:194
	PRINTFORMW The weather helped draw out %PARSE("your")% fighting spirit.
IF TFLAG:193
	PRINTW
	PRINTFORML %PARSE("You")% drank a sports drink after the practice ended.
	PRINTFORML The liquid seems to soak into %PARSE("your")% tired body...
	ITEM:スポーツドリンク --
ENDIF
;-------------------------------------------------
;412,勉強
;-------------------------------------------------
@MESSAGE_COM412
PRINTFORM %PARSE("You")% decided to study
IF TARGET > 0 && !CFLAG:TARGET:睡眠 && CFLAG:行動 != 5
	PRINTFORM  with %CALLNAME:TARGET%
	IF ABL:MASTER:教養 > ABL:TARGET:教養
		PRINTFORM , teaching %HIM_HER(TARGET)% a few things
	ELSE
		PRINTFORM , being taught a few things
	ENDIF
ELSEIF TARGET > 0
	PRINTFORM  along with %CALLNAME:TARGET%
ENDIF
PRINTL .
SIF ABL:MASTER:教養 > 2 && TARGET > 0 && !CFLAG:TARGET:睡眠 && CFLAG:行動 != 5
	PRINTFORML %CALLNAME:TARGET% is impressed with %PARSE("your")% profound knowledge.
SIF ABL:MASTER:教養 < ABL:TARGET:教養 - 2 && !CFLAG:TARGET:睡眠&& CFLAG:行動 != 5
	PRINTFORML %CALLNAME:TARGET%'s teaching helped a lot.
IF ITEM:214 > 0
	PRINTFORML %PARSE("You")% finish a homework assignment!
	ITEM:214 --
ENDIF
;-------------------------------------------------
;413,料理
;-------------------------------------------------
@MESSAGE_COM413
#DIM 道具力
#DIM ボーナス点
;本当はこれで良かったんだけど、既存の口上に全部手を入れなくちゃいけなくなったのでやめました
道具力 = TFLAG:194 / 100
ボーナス点 = TFLAG:194 % 100
;PRINTFORMW \@ DISH_ASSI ? %CALLNAME:DISH_ASSI%と # \@【%DISH_NAME%】を作ります
SELECTCASE DISH_NAME
	CASE "揚げローター"
		PRINTFORML %PARSE("You season")% the rotor with salt and pepper and %PARSE("fry")% it nicely.
	CASE "Eマッサージャ風ローターの湯引き"
		PRINTFORML %PARSE("You take")% off the nicely boiled rotor and quickly %PARSE("serve")% it in a chilled container with some plum pulp.
	CASE "クリキャップ用ローターの握り"
		PRINTFORML %PARSE("You press")% the rotor into slightly grilled fish and %PARSE("cover")% it with a special sauce.
	CASE "オナホール仕立てのローター煮込み"
		PRINTFORML %PARSE("You boil")% the rotor together with kombu in a simple fish soup.
	CASEELSE
;		PRINTFORML ・
;		PRINTFORML ・・・
;		SIF DISH_TIME > 10
;			PRINTFORML ・・・・・・
;		SIF DISH_TIME > 30
;			PRINTFORML ・・・・・・・・・・・・
ENDSELECT
;PRINTFORML 【%EX_DISH_NAME%】
;CALL SHOW_TASTE(DISH_TASTE, "DISH_DATA")
;PRINTFORM 出来栄え：
;CALL 出来栄え(DISH_BASEPOINT)
;IF DISH_ASSI
;	PRINTFORML 　／%CALLNAME:MASTER%の技能({ABL:MASTER:料理技能}) + %CALLNAME:DISH_ASSI%の技能({ABL:DISH_ASSI:料理技能}) + 食材の品質({DISH_RANK})\@ 道具力 ? + 道具の品質({道具力}) # \@\@ ボーナス点 ? + ボーナス点({ボーナス点}) # \@
;ELSE
;	PRINTFORML 　／%CALLNAME:MASTER%の技能 x 2({ABL:MASTER:料理技能 * 2}) + 食材の品質({DISH_RANK})\@ 道具力 ? + 道具の品質({道具力}) # \@\@ ボーナス点 ? + ボーナス点({ボーナス点}) # \@
;ENDIF
;-------------------------------------------------
;414,食事を取る
;-------------------------------------------------
@MESSAGE_COM414
#DIM DYNAMIC EAT_ALONE
SIF TFLAG:194 == 99 || FLAG:70 ;com custom code
	EAT_ALONE = 1

PRINTFORML %PARSE("You decide")% to eat the ＜%EX_DISH_NAME%＞.
IF TARGET > 0 && !CFLAG:TARGET:睡眠 && !EAT_ALONE ;com custom code
	PRINTFORML %PARSE("You invite")% %CALLNAME:TARGET% \@ GET_TARGETNUM() > 1 ? and the others to # to\@ have a meal.
;ELSEIF TARGET > 0 && CFLAG:TARGET:衰弱
;	PRINTFORML %CALLNAME:PLAYER%は%CALLNAME:TARGET%に食事を取らせた
ELSE
	PRINTFORML %PARSE("You eat")% a meal by %PARSE("yourself",1)% in silence...
	EAT_ALONE = 1
ENDIF
CALL MESSAGE_EAT_DISH(PLAYER, EAT_ALONE)
;-------------------------------------------------
;415,食事をふるまう
;-------------------------------------------------
@MESSAGE_COM415
#DIM DYNAMIC EAT_ALONE
SIF GET_TARGETNUM() <= 1
	EAT_ALONE = 1
PRINTFORML %PARSE("You offer")% some ＜%EX_DISH_NAME%＞ to %CALLNAME:TARGET%\@ EAT_ALONE == 0 ? %" "%and the others # \@.
IF TFLAG:193 == -2
	PRINTFORML %CALLNAME:TARGET%'s face belies %HIS_HER(TARGET)% thoughts, and %HE_SHE(TARGET)% returns the ＜%EX_DISH_NAME%＞.
	RETURN
ENDIF
CALL MESSAGE_EAT_DISH(TARGET, EAT_ALONE)

;-------------------------------------------------
;414/415,共通、各料理ごとの地の文とその後の反応
;-------------------------------------------------
@MESSAGE_EAT_DISH(CHARA, EAT_ALONE)
#DIM CHARA    ;主体となるキャラ
#DIM EAT_ALONE;食べるのが一人なら1
;Custom code
#DIM DYNAMIC TENSE
SIF CHARA!=MASTER&&EAT_ALONE==1
	TENSE = 1
IF TFLAG:194 == 1
	PRINTL This is... Nopan Shabu-Shabu!
;ELSEIF STRCOUNT(DISH_TASTE, "ローター/")
;	PRINTL 
ELSEIF STRCOUNT(DISH_TASTE, "精力/")
	PRINTL This is just brimming with vigor!
ENDIF
SELECTCASE DISH_NAME
CASE "ギンギー料理"
	PRINTW 「What is that thing?」
	PRINTW 「Gingy dish.」
	PRINTW 「What's it made of?」
	PRINTW 「Gingy.」
CASE "モッツァレラチーズとトマトのサラダ"
IF STRCOUNT(DISH_TASTE, "野菜抜き/")
	IF CHARA == [[ナズーリン]] || (CHARA == MASTER && FLAG:なりきり == [[ナズーリン]])
		;なんて雑な専用分岐！ハーモニーってなんだよ
		PRINTL So deliciousss～!  ... T-This is...! This tastee～! The cheese and the cheese coil together perfectly! 
		PRINTL Cheese and cheese! Cheese complements cheese! Is this what you call a “Harmony”～? Or a “Harmony of taste”～?!
		PRINTL It's like a duet of Simon and Garfunkel! Or Utchan and Nanchan! Or Asao Takamori's original work and Tetsuya Chiba's art in “Ashita no Joe”!
	ELSE
		PRINTL So deliciousss～!  ... T-This is...!
		PRINTL ... Is that it? Falls a bit flat. It's missing something... This cheese～
	ENDIF
ELSE
	PRINTL Deeeelicious～! Th...This is～! This flavor～! The juicy part of tomato clings to the mozzarella cheese perfectly!
	PRINTL Cheese and tomato! Tomato complements cheese! Is this what you call a “Harmony”～? Or a “Harmony of taste”～?!
	PRINTL It's like a duet of Simon and Garfunkel! Or Utchan and Nanchan! Or Asao Takamori's original work and Tetsuya Chiba's art in “Ashita no Joe”!
ENDIF
CASE "ドーピングコンソメスープ"
	PRINTL It's mixed with a precise balance of countless drug ingredients. The unique seasoning is cooked for seven days and seven nights!!
	PRINTL It can't be detected in blood or urine. Not only are the drugs' effect several times greater...
	PRINTL It gets even stronger once it's injected (ingested) by the blood vessels!!
CASE "団子"
	IF NAME_MOON(DAY:3) == "十五夜 -中秋の名月- "
		IF TENSE
			PRINTFORML %CALLNAME:CHARA% 
			IF MOON_WATCH(DAY:3) < 1
				PRINTFORML regrets the moon can't be seen.
			ELSE
				PRINTFORML gaze at the stunning full moon.
			ENDIF
			PRINTFORML %HE_SHE(CHARA,1)% eats moon-viewing Dango.
		ELSE
			PRINTFORML \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others # \@ 
			IF MOON_WATCH(DAY:3) < 1
				PRINTFORML \@EAT_ALONE?%PARSE("regret")%#regrets\@ the moon can't be seen.
			ELSE
				PRINTFORML \@EAT_ALONE?%PARSE("gaze")%#gazes\@ at the stunning full moon.
			ENDIF
			IF CHARA == MASTER
				PRINTFORML \@EAT_ALONE?%PARSE("You eat")%#They eat\@ moon-viewing Dango.
			ELSE
				PRINTFORML They eat moon-viewing Dango.
			ENDIF
		ENDIF
	ENDIF
CASE "寿司", "刺身", "活け造り"
	IF TENSE
		PRINTFORML %CALLNAME:CHARA% enjoys the simple but deep taste of the fish.
	ELSE
			PRINTFORML \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others enjoy# %PARSE("enjoy")%\@ the simple but deep taste of the fish.
	ENDIF
CASE "スターゲイジーパイ"
	IF TENSE
		PRINTFORML %CALLNAME:CHARA% feels weight bearing down on %HIM_HER(CHARA)% as %HE_SHE(CHARA)% stares at the fish gazing up at the sky, but resolves %HIM_HER(CHARA)%self.
	ELSEIF CHARA == MASTER
			IF EAT_ALONE
				PRINTFORML %PARSE("You")% %PARSE("feel")% weight bearing down on %PARSE("you",5)% as %PARSE("you stare",1)% at the fish gazing up at the sky, but %PARSE("resolve")% %PARSE("yourself",1)%...
			ELSE
				PRINTFORML %PARSE("You")% and the others feel weight bearing down on %PARSE("you",4)% as %PARSE("you",2)% stare at the fish gazing up at the sky, but resolve %PARSE("yourselves",1)%...
			ENDIF
	ELSE
		PRINTFORML %CALLNAME:CHARA%\@ EAT_ALONE == 0 ? %" "%and the others # \@ feel weight bearing down on them as they stare at the fish gazing up at the sky, but resolve themselves...
	ENDIF
CASE "肉まん"
	IF STRCOUNT(DISH_TASTE, "温かい/") && STRCOUNT(DISH_TASTE, "旬/")
		IF TENSE
			PRINTFORML %CALLNAME:CHARA% bites into the steaming hot %DISHNAME_TR(DISH_NAME)%!
		ELSE
				PRINTFORML \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others bite # %PARSE("bite")%\@ into the steaming hot %DISHNAME_TR(DISH_NAME)%!
		ENDIF
	ENDIF
CASE "サンドイッチ", "おにぎり", "スコーン"
	IF TENSE
		PRINTFORML %CALLNAME:CHARA% bites into the %DISHNAME_TR(DISH_NAME)%.
	ELSE
			PRINTFORML \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others bite#%PARSE("bite")% \@ into the %DISHNAME_TR(DISH_NAME)%.
	ENDIF
CASE "おせち料理"
	IF STRCOUNT(DISH_TASTE, "縁起物/")
		IF TENSE
			PRINTFORML %CALLNAME:CHARA% celebrates the arrival of the New Year with a gorgeous spread of Jubako dishes.
		ELSE
			PRINTFORML \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others celebrates#%PARSE("celebrate")% \@  the arrival of the New Year with a gorgeous spread of Jubako dishes.
		ENDIF
	ENDIF
CASE "年越し蕎麦"
	IF STRCOUNT(DISH_TASTE, "縁起物/")
		IF TENSE
			PRINTFORM %CALLNAME:CHARA% slurps soba while 
		ELSE
			PRINTFORM \@CHARA==MASTER?%PARSE("You")%#%CALLNAME:CHARA%\@\@ EAT_ALONE == 0 ? %" "%and the others slurp#%PARSE("slurp")% \@ soba while 
		ENDIF
		IF RAND:10 < 5
			PRINTFORML thinking about the coming year.
		ELSE
			PRINTFORML looking back on the year that's passed.
		ENDIF
	ENDIF
CASE "恵方巻"
SIF STRCOUNT(DISH_TASTE, "縁起物/")
	PRINTFORML The sound of someone taking massive bites of the thick roll can be heard throughout...
;野菜抜き
CASE "野菜炒め"
	SIF STRCOUNT(DISH_TASTE, "野菜抜き/")
	PRINTFORML It's supposed to be a stir-fried vegetable, but there's only bean sprouts...
CASE "おひたし"
	SIF STRCOUNT(DISH_TASTE, "野菜抜き/")
	PRINTFORML It's just vinegar and dried bonito, there's nothing else...
CASE "漬物に大盛り飯"
	SIF STRCOUNT(DISH_TASTE, "野菜抜き/")
	PRINTL There are no pickles! You can't eat this!
CASEELSE
	SIF STRCOUNT(DISH_TASTE, "野菜抜き/")
		PRINTL There are no vegetables in it...
ENDSELECT
;custom code, don't show if eating alone
SIF EAT_ALONE == 1
	RETURN 1
IF DISH_DRG
	CALL MESSAGE_EAT_DISH_DRG(TARGET, GET_TARGETNUM() > 1)
ELSEIF TFLAG:193 == 1
	PRINTFORML %CALLNAME:TARGET% eats the %DISHNAME_TR(EX_DISH_NAME)% contently...
ELSEIF TFLAG:193 == -1
	PRINTFORML ... Looks like it doesn't suit %CALLNAME:TARGET%'s palate.
ELSE
	IF CHARA == MASTER
		SIF TARGET != MASTER
			PRINTFORML %CALLNAME:TARGET% has a good time with you while eating the %DISHNAME_TR(EX_DISH_NAME)%...
	ELSE
		PRINTFORML %CALLNAME:TARGET% has a good time while eating the %DISHNAME_TR(EX_DISH_NAME)%...
	ENDIF
ENDIF

;-------------------------------------------------
;仕込み料理を食べた時の反応,MASTERには使わない
;-------------------------------------------------
@MESSAGE_EAT_DISH_DRG(CHARA, 複数人)
#DIM CHARA
#DIM 複数人
SIF CHARA == MASTER
	RETURN
;bug fix target -> chara
SELECTCASE ITEMNAME:DISH_DRG
CASE "媚薬"
	PRINTFORML %CALLNAME:CHARA% \@ GET_TARGETNUM() > 1 ? and the others eat# eats \@ the %DISHNAME_TR(EX_DISH_NAME)% laced with aphrodisiac.
	PRINTFORML \@GET_TARGETNUM() > 1 ?Their cheeks flush and some let out low moans#%HIS_HER(CHARA,1)% cheeks flush and %HE_SHE(CHARA)% lets out a low moan\@...
CASE "利尿剤"
	PRINTFORML %CALLNAME:CHARA% \@ GET_TARGETNUM() > 1 ? and the others eat# eats \@ the %DISHNAME_TR(EX_DISH_NAME)% laced with diuretic.
	PRINTFORML \@GET_TARGETNUM() > 1 ?They clamp their thigh shut, and begin waddling around#%HE_SHE(CHARA,1)% clamps %HIS_HER(CHARA)% thigh shut, and begins waddling around\@...
CASE "惚れ薬"
	PRINTFORML %CALLNAME:CHARA% \@ GET_TARGETNUM() > 1 ? and the others eat# eats \@ the %DISHNAME_TR(EX_DISH_NAME)% laced with a love potion.
	PRINTFORML \@GET_TARGETNUM() > 1 ?They stare at you with enraptured gazes#%HE_SHE(CHARA,1)% stares at you with an enraptured gaze\@...
CASE "睡眠薬"
	PRINTFORML %CALLNAME:CHARA% \@ GET_TARGETNUM() > 1 ? and the others eat# eats \@ the %DISHNAME_TR(EX_DISH_NAME)% laced with sleeping medicine.
CASE "排卵誘発剤" ;addition custom code
	PRINTFORML %CALLNAME:CHARA% \@ GET_TARGETNUM() > 1 ? and the others eat# eats \@ the %DISHNAME_TR(EX_DISH_NAME)% laced with ovulation drug.
ENDSELECT


;-------------------------------------------------
;416,演奏する
;-------------------------------------------------
@MESSAGE_COM416
#DIM DYNAMIC 楽器弾き
#DIM DYNAMIC 歌唄い
#DIMS DYNAMIC 楽器筆頭
#DIMS DYNAMIC 歌筆頭
VARSET LOCAL
;Custom code, replaced
CALL MESSAGE_COM416_TR
RETURN RESULT
LOCAL = -1
WHILE 1
	;Bug-fix
	SIF LOCAL >= (CHARANUM - 1)
		BREAK
	LOCAL = FINDCHARA(TALENT:音楽知識, 1, LOCAL + 1)
	SIF LOCAL < 0
		BREAK
	SIF !LOCAL
		CONTINUE
	IF CFLAG:MASTER:現在位置 == CFLAG:LOCAL:現在位置
		IF !ACCOMPANY_ABLE(LOCAL) || TARGET == LOCAL
			CONTINUE
		ELSE
			IF !楽器弾き
				楽器筆頭 = %CALLNAME:LOCAL%
			ELSEIF !RAND:楽器弾き
				楽器筆頭 = %CALLNAME:LOCAL%
			ENDIF
			楽器弾き ++
		ENDIF
	ENDIF
WEND
LOCAL:1 = -1
WHILE 1
	LOCAL:1 = FINDCHARA(TALENT:音楽知識, 2, LOCAL:1 + 1)
	SIF LOCAL:1 <0
		BREAK
	SIF !LOCAL:1
		CONTINUE
	IF CFLAG:MASTER:現在位置 == CFLAG:(LOCAL:1):現在位置
		IF !ACCOMPANY_ABLE(LOCAL:1) || TARGET == LOCAL:1
			CONTINUE
		ELSE
			IF !歌唄い
				歌筆頭 = %CALLNAME:(LOCAL:1)%
			ELSEIF !RAND:歌唄い
				歌筆頭 = %CALLNAME:(LOCAL:1)%
			ENDIF
			歌唄い ++
		ENDIF
	ENDIF
WEND
SIF 楽器弾き > 1
	楽器筆頭 += "達"
SIF 歌唄い > 1
	歌筆頭 += "達"
IF TFLAG:使用楽器 != 0
	PRINTFORM %CALLNAME:MASTER%は
	;楽器持ちキャラ、プリリバ三姉妹と九十九姉妹と雷鼓がTARGETで彼女らの音楽技能を上回っている
	IF TARGET > 0 && (ABL:MASTER:音楽技能 >= ABL:TARGET:音楽技能) && TALENT:TARGET:音楽知識 == 1 && ACCOMPANY_ABLE(TARGET)
		PRINTFORM %CALLNAME:TARGET%と並んで
	;歌唱キャラ、ミスティアと響子、エレンがTARGETで彼女らの音楽技能を上回っている
	ELSEIF TARGET > 0 && (ABL:MASTER:音楽技能 >= ABL:TARGET:音楽技能) && TALENT:TARGET:音楽知識 == 2 && ACCOMPANY_ABLE(TARGET)
		PRINTFORM %CALLNAME:TARGET%の歌に合わせて
	;あなたの音楽技能がTARGETより低いかTARGETが音楽知識を持っている
	ELSEIF TARGET > 0 && (ABL:MASTER:音楽技能 <= ABL:TARGET:音楽技能 || TALENT:TARGET:音楽知識)
		PRINTFORM %CALLNAME:TARGET%に助言をしてもらいながら
	ELSEIF 楽器弾き && 歌唄い
		PRINTFORM %楽器筆頭%と並び、%歌筆頭%の歌に合わせて
		LOCAL:2 = 3
	ELSEIF 楽器弾き
		PRINTFORM %楽器筆頭%と並んで、
		LOCAL:2 = 2
	ELSEIF 歌唄い
		PRINTFORM %歌筆頭%に合わせて、
		LOCAL:2 = 1
	ENDIF
	SELECTCASE TFLAG:使用楽器
		CASE 1
			PRINTL キーボードを弾いてみた
		CASE 2
			PRINTL ピアノを弾いてみた
		CASE 3
			PRINTL ギターを弾いてみた
		CASE 4
			PRINTL トランペットを吹いてみた
		CASE 5
			PRINTL ヴァイオリンを弾いてみた
	ENDSELECT
	IF TFLAG:193 == 1
		IF LOCAL:2
			IF TARGET && !GROUPMATCH(TARGET,20,21,22,28,44,88,94,95,96)
				PRINTFORM %CALLNAME:TARGET%\@ IN_ROOM_NUMBER(CFLAG:MASTER:現在位置) > 2 ? 達 #  \@は、%CALLNAME:MASTER%と
				IF LOCAL:2 == 3
					PRINTFORM %楽器筆頭%と%歌筆頭%の即興ライブ
				ELSEIF LOCAL:2 == 2
					PRINTFORM %楽器筆頭%のアンサンブル
				ELSEIF LOCAL:2 == 1
					PRINTFORM %歌筆頭%の共演
				ENDIF
				PRINTFORML にうっとりと聞き惚れている
			ELSE
				PRINTFORML %CALLNAME:TARGET%は、%CALLNAME:MASTER%とのセッションにノリノリで興じている
			ENDIF
		ELSE
			IF TARGET
				IF !GROUPMATCH(TARGET,20,21,22,28,44,88,94,95,96)
					PRINTFORML %CALLNAME:TARGET%\@ IN_ROOM_NUMBER(CFLAG:MASTER:現在位置) > 2 ? 達 #  \@はうっとりした表情で聞き惚れている
				ELSE
					PRINTFORML %CALLNAME:TARGET%は、%CALLNAME:MASTER%とのセッションにノリノリで興じている
				ENDIF
			ELSEIF (WITH_MOB() || DATE_HITOGOMI()) && !GROUPMATCH(TIME:2,1,6,7)
				PRINTFORML \@ (MAIN_MAP !=9 && CFLAG:MASTER:現在位置 == 960) || (IN_HOME(CFLAG:MASTER:現在位置) && !CHK_FOCUS(927,CFLAG:MASTER:現在位置,948) && (ROOMDATA:(CFLAG:MASTER:現在位置 % 100) & 場所_モブ)) ? %ANIMALNAME()% # %DATE_HITOGOMI_SYUBETU()% \@は%CALLNAME:MASTER%の側に来て聞き惚れている
			ELSE
				PRINTFORML 誰も聞かない会心の演奏が流れている
			ENDIF
		ENDIF
	ELSEIF TFLAG:193 == -1
		IF LOCAL:2
			IF TARGET && !GROUPMATCH(TARGET,20,21,22,28,44,88,94,95,96)
				PRINTFORM %CALLNAME:TARGET%は、%CALLNAME:MASTER%と
				IF LOCAL:2 == 3
					PRINTFORM %楽器筆頭%と%歌筆頭%の
				ELSEIF LOCAL:2 == 2
					PRINTFORM %楽器筆頭%の
				ELSEIF LOCAL:2 == 1
					PRINTFORM %歌筆頭%の
				ENDIF
				PRINTFORML 立てる不協和音に顔を蹙めている
			ELSE
				PRINTFORML %CALLNAME:TARGET%は、%CALLNAME:MASTER%とのセッションを切り上げて慌てて離れた
			ENDIF
		ELSE
			IF TARGET
				PRINTFORML %CALLNAME:TARGET%は両手で耳を塞いでいる
			ELSEIF WITH_MOB() || DATE_HITOGOMI()
				PRINTFORML \@ (MAIN_MAP !=9 && CFLAG:MASTER:現在位置 == 960) || (IN_HOME(CFLAG:MASTER:現在位置) && !CHK_FOCUS(927,CFLAG:MASTER:現在位置,948) && (ROOMDATA:(CFLAG:MASTER:現在位置 % 100) & 場所_モブ)) ? %ANIMALNAME()% # %DATE_HITOGOMI_SYUBETU()% \@は、慌てて%CALLNAME:MASTER%の側から離れた
			ELSE
				PRINTFORML ヒドい演奏が周囲の調和をかき乱している
			ENDIF
		ENDIF
	ELSE
		IF LOCAL:2
			IF TARGET && !GROUPMATCH(TARGET,20,21,22,28,44,88,94,95,96)
				PRINTFORM %CALLNAME:TARGET%\@ IN_ROOM_NUMBER(CFLAG:MASTER:現在位置) > 2 ? 達 #  \@は、%CALLNAME:MASTER%と
				IF LOCAL:2 == 3
					PRINTFORM %楽器筆頭%と%歌筆頭%の即興セッション
				ELSEIF LOCAL:2 == 2
					PRINTFORM %楽器筆頭%のアンサンブル
				ELSEIF LOCAL:2 == 1
					PRINTFORM %歌筆頭%の共演
				ENDIF
				PRINTFORML を感心しながら眺めている
			ELSE
				PRINTFORML %CALLNAME:TARGET%は、%CALLNAME:MASTER%とのセッションに楽しそうに励んでいる
			ENDIF
		ELSE
			IF TARGET
				IF !GROUPMATCH(TARGET,20,21,22,28,44,88,94,95,96)
					PRINTFORML %CALLNAME:TARGET%\@ IN_ROOM_NUMBER(CFLAG:MASTER:現在位置) > 2 ? 達 #  \@は感心した様子で聞いている
				ELSE
					PRINTFORML %CALLNAME:TARGET%は、%CALLNAME:MASTER%とのセッションに楽しそうに励んでいる
				ENDIF
			ELSEIF WITH_MOB() || DATE_HITOGOMI()
				PRINTFORML \@ (MAIN_MAP !=9 && CFLAG:MASTER:現在位置 == 960) || (IN_HOME(CFLAG:MASTER:現在位置) && !CHK_FOCUS(927,CFLAG:MASTER:現在位置,948) && (ROOMDATA:(CFLAG:MASTER:現在位置 % 100) & 場所_モブ)) ? %ANIMALNAME()% # %DATE_HITOGOMI_SYUBETU()% \@は、%CALLNAME:MASTER%の側に寄ってきた
			ELSE
				PRINTFORML 誰も聞かない演奏が流れている
			ENDIF
		ENDIF
	ENDIF
ENDIF

;楽譜入手処理
PRINTL
LOCAL = -1
SIF TFLAG:193 == 1
	LOCAL = 楽譜入手_演奏大成功(TARGET)
SIF (LOCAL == -1) && TARGET && (TFLAG:193 != -1) && (RAND:(100) < 30)
	RESULT = 楽譜入手_ランダム()

;-------------------------------------------------
;417,昼寝する;417,昼寝する
;-------------------------------------------------
@MESSAGE_COM417
TFLAG:193 = RAND:6
IF TFLAG:194 == 2
	SELECTCASE TFLAG:193
		CASE 0,2,4
			PRINTFORML %PARSE("You sit")% up and %PARSE("notice")% a blanket sliding off.
			PRINTFORML Someone must have put it there.
			PRINTFORML %PARSE("You appreciate")% the sentiment as %PARSE("you",1)% %PARSE("get")% up.
		CASEELSE
			IF ITEM:キリのベッド
				PRINTFORML %PARSE("You")% really %PARSE("want")% to just fall back asleep in the soft bed, but %PARSE("persevere")%, getting out of bed and starting the day...
			ELSEIF ITEM:ナラのソファー
				PRINTFORML Even if it's a couch, %PARSE("you")% can apparently sleep on it just fine.
			ELSE
				PRINTFORML %PARSE("You awaken")% on the hard tatami mat.
			ENDIF
	ENDSELECT
ELSEIF TFLAG:194 == 1
	IF CFLAG:TARGET:添い寝中
		PRINTFORML %CALLNAME:TARGET% is peacefully sleeping next to %PARSE("you")%...
	ELSE
		;合意未取得の場合は5に入らないように
		SIF TFLAG:193 == 5 && !(CFLAG:TARGET:既成事実 & 合意_うふふ)
			TFLAG:193 = 2
		;キス未経験時は2に入らないように
		SIF TFLAG:193 == 2 && TALENT:TARGET:キス未経験
			TFLAG:193 = 3
		SELECTCASE TFLAG:193
			CASE 0
				PRINTFORML Somehow %PARSE("your")% body feels heavy...
				PRINTFORML %PARSE("You")% %PARSE("open")% %PARSE("your",1)% eyes to find out why %PARSE("you",1)% can't move.
				PRINTFORM It's because %CALLNAME:TARGET% is sleeping while hugging %PARSE("you",5)%, 
				IF TARGET == 57 && !TALENT:恋慕
					PRINTFORML an Okina mask floating around %HIM_HER(TARGET)%.
				ELSE
					PRINTFORML looking relaxed.
				ENDIF
				
				PRINTFORML Since it's impossible to get up like this, %PARSE("you roll")% %CALLNAME:TARGET% away with a bitter smile.
			CASE 1
				PRINTFORML %PARSE("You awake")% and %PARSE("feel")% something heavy on %PARSE("your",1)% thighs.
				PRINTFORML %CALLNAME:TARGET% has slept using %PARSE("your")% body as a pillow.
				PRINTFORML %PARSE("You pull")% %PARSE("yourself")% away from under %CALLNAME:TARGET%'s head.
				SELECTCASE CFLAG:TARGET:性格傾向
					CASE 1, 4;弱気、真面目
						PRINTFORML The pillow user jerks up as if startled.
					CASE 2, 3;強気、素直
						PRINTFORML The pillow user %TEXTR("lets out a dissatisfied mewl/yawns tiredly")% and wakes up.
					CASEELSE
						PRINTFORML The pillow user blinks in surprise at the awakening.
				ENDSELECT
			CASE 2
				PRINTFORML When %PARSE("you awaken")% %CALLNAME:TARGET% is sitting next to %PARSE("you",4)%.
				PRINTFORM For some reason %HE_SHE(TARGET)% sits in silence
				IF TARGET == 57 && !TALENT:恋慕
					PRINTFORML , hiding %HIS_HER(TARGET)% face behind a Saru mask.
				ELSE
					SELECTCASE CFLAG:TARGET:性格傾向
						CASE 2;強気
							IF TALENT:TARGET:恋慕 || TALENT:TARGET:愛欲
								PRINTFORML , looking at %PARSE("you")% with narrowed eyes...and with a slight blush.
							ELSE
								PRINTFORML , %HIS_HER(TARGET)% face turned away...blushing slightly...
							ENDIF
						CASE 1, 4;弱気、真面目
							PRINTFORM  while blushing
							IF TALENT:TARGET:恋慕 || TALENT:TARGET:愛欲
								PRINTFORML , glancing at %PARSE("you")%.
							ELSE
								PRINTFORML .
							ENDIF
						CASEELSE
							PRINTFORML , looking a bit embarrassed.
					ENDSELECT
				ENDIF
				PRINTFORM %CALLNAME:TARGET%
				SELECTCASE CFLAG:TARGET:性格傾向
					CASE 1, 4;弱気、真面目
						PRINTFORML  greets %PARSE("you")% back a bit clumsily.
					CASE 2;強気
						PRINTFORML  replies smoothly... but stammers just a bit.
					CASEELSE
						PRINTFORML  greets %PARSE("you")% back, but is at a bit of a loss for words.
				ENDSELECT
				EXP:TARGET:キス経験 ++
				;EXP:MASTER:キス経験 ++
			CASE 3
				PRINTFORML As %PARSE("you wake")% up, %PARSE("you see",1)% %CALLNAME:TARGET%'s face right before %PARSE("your",1)% eyes.
				IF TALENT:TARGET:恋慕 || TALENT:TARGET:愛欲
					PRINTFORM %TNAME(TARGET)% 
					SELECTCASE CFLAG:TARGET:性格傾向
						CASE 1, 4;弱気、真面目
							PRINTFORML looks peaceful and satisfied.
						CASE 2;強気
							PRINTFORML looks at %PARSE("you")% with a bemused expression.
						CASEELSE
							PRINTFORML smiles softly at %PARSE("you")%.
					ENDSELECT
					PRINTFORML Apparently, %HE_SHE(TARGET)% has been watching %PARSE("you")% sleep for a while...
				ELSE
					PRINTFORML When %PARSE("you",3)% two realize %PARSE("you're",2)% staring at each other, %PARSE("you",2)% both jump back simultaneously.
					PRINTFORM %CALLNAME:TARGET% tries to act as if nothing happened
					IF TARGET == 57 && !TALENT:恋慕
						PRINTFORML , but a Saru and a Shishi-guchi mask are flying around %HIM_HER(TARGET)%.
					ELSE
						PRINTFORML , but %HIS_HER(TARGET)% ears are bright red.
					ENDIF
					PRINTFORML %PARSE("You")% can't help but break into a smile.
				ENDIF
			CASE 4
				PRINTFORML After %PARSE("you awaken")%, %PARSE("you notice",1)% that %PARSE("you are",1)% sleeping on %CALLNAME:TARGET%'s lap.
				PRINTFORML When %CALLNAME:TARGET% notices that %PARSE("you have")% awoken, %HE_SHE(TARGET)% pats %PARSE("your",1)% head with a smile.
				PRINTFORML For a while, %PARSE("you",3)% two stay like that without saying a word.
			CASE 5
				PRINTFORML %PARSE("You wake")% up feeling something rubbing between %PARSE("your",1)% legs.
				PRINTFORML %PARSE("You look")% between %PARSE("your",1)% legs to see what it was, to find %CALLNAME:TARGET% looking back.
				;Intentionally different, having the player be disgusted is a bit weird, japanese morals ftw
				PRINTFORML %CALLNAME:TARGET% keeps staring at %PARSE("you",5)% with determined eyes, but keeps up %HIS_HER(TARGET)% obscene massage.
		ENDSELECT
	ENDIF
ENDIF
;-------------------------------------------------
;420,る～ことと話す
;-------------------------------------------------
@MESSAGE_COM420
PRINTFORML Ruukoto「It's like that. \@ TFLAG:195 != 0 && TFLAG:195 != 14 ? Well then, have a nice day. # Do you have any other questions?\@」
;-------------------------------------------------
;421,願掛け
;-------------------------------------------------
@MESSAGE_COM421
SIF FLAG:願掛け内容 == 0
RETURN 0
IF !TFLAG:193
	PRINTFORML %PARSE("You offer")% sacrifice and pray to Opantsu-sama.
	IF INRANGE(FLAG:願掛け内容, 1, CHARANUM)
		IF CFLAG:(FLAG:願掛け内容):神社在住
		PRINTFORML Feels like %PARSE("your",3)% relationship with %CALLNAME:(FLAG:願掛け内容)% has deepened...
		ELSE
		PRINTFORML For some reason, it feels like running into %CALLNAME:(FLAG:願掛け内容)% tomorrow is sure to happen...
		ENDIF
	ELSEIF FLAG:願掛け内容 == 200
		PRINTFORML For some reason, %PARSE("your")% hips have started moving on their own...
	ELSEIF FLAG:願掛け内容 == 201
		PRINTFORML %PARSE("Your")% mind feels calm, as if all worldly desires just melt away...
	ELSEIF FLAG:願掛け内容 == 202
		PRINTL It feels like any number of panties can be obtained...!
	ELSEIF FLAG:願掛け内容 == 203
		CALL PINK_WIND
	ELSEIF FLAG:願掛け内容 == 206 ;com custom code
		PRINTFORMW %PARSE("You pray")% to have children with %CALLNAME:TARGET%...
		CALL Com_PregPrayer(TARGET, 1)
	;----------------------------------
	ELSE
		PRINTFORMW ... But the wish is drowned out by a mysterious force...
	ENDIF
ELSEIF TFLAG:193 == 200
	PRINTFORML Divine punishment was called down on %CALLNAME:53%!
ELSE
	SELECTCASE TFLAG:193
		CASE 23
			LOCALS '= "sexually curious"
		CASE 31
			LOCALS '= "liberated"
		CASE 41
			LOCALS '= "easier to get wet"
		CASE 70
			LOCALS '= "more responding to pleasure"
		CASE 80
			LOCALS '= "perverted"
		CASE 82
			LOCALS '= "sadistic"
		CASE 83
			LOCALS '= "masochistic"
		CASE 101
			LOCALS '= "C Sense"
		CASE 102
			LOCALS '= "V Sense"
		CASE 103
			LOCALS '= "A Sense"
		CASE 104
			LOCALS '= "B Sense"
		CASE 106
			LOCALS '= "M Sense"
	ENDSELECT
	PRINTFORML %CALLNAME:TARGET% is fidgeting for some reason...
	IF TFLAG:193 > 100
	PRINTFORML %CALLNAME:TARGET%'s %LOCALS% has been temporarily increased.
	ELSE
		PRINTFORML %CALLNAME:TARGET% has become temporarily %LOCALS%.
	ENDIF
ENDIF
;-------------------------------------------------
;431,お風呂でくつろぐ
;-------------------------------------------------
@MESSAGE_COM431
;番台を怒らせてしまった場合
IF (TFLAG:209 == 4 && CFLAG:MASTER:現在位置 == 250) || (TFLAG:211 == 4 && CFLAG:MASTER:現在位置 == 940)
		PRINTFORML %PARSE("You feel")% a sharp gaze from the bath attendant...
		PRINTFORML Might be best to return another day...
;既に入浴している
ELSEIF TFLAG:194 == 1
	IF (CFLAG:MASTER:現在位置 == 大衆浴場 && TFLAG:209 == 0) || (CFLAG:MASTER:現在位置 == 940 && TFLAG:211 == 0)
		PRINTFORML %PARSE("You were")% just in the bath
	ELSEIF TFLAG:209 == 1 && MAIN_MAP != 2 && CFLAG:MASTER:現在位置 == 大衆浴場
		PRINTFORML 「If you enjoyed it, please come again!」
	ELSEIF TFLAG:211 == 1 && MAIN_MAP != 9 && CFLAG:MASTER:現在位置 == 940
		PRINTFORML 「Come again sometimeー!」
	ELSE
		PRINTFORML %PARSE("You were")% just in the bath.
	ENDIF
ELSE
	IF CFLAG:MASTER:現在位置 == 大衆浴場 || CFLAG:MASTER:現在位置 == 940
		PRINTFORML %PARSE("You freshen")% up.
;	ELSEIF CFLAG:MASTER:現在位置 == 13 || CFLAG:MASTER:現在位置 == 24 || CFLAG:MASTER:現在位置 == 30 || CFLAG:MASTER:現在位置 == 39
	ELSEIF BATHCHECK(CFLAG:MASTER:現在位置)
		PRINTFORML %PARSE("You relax")% in the bath.
	ELSE
		PRINTFORML %PARSE("You relax")% in the simple pool\@GETBIT (FLAG:プール, 2)?%" "%and %PARSE("wash")% %PARSE("yourself",1)% clean#\@.
		SIF GETBIT (FLAG:プール, 2)
			PRINTL 
		TFLAG:400 = RAND:2
		IF TFLAG:400 && DATE_HITOGOMI()
			PRINTFORML A %DATE_HITOGOMI_SYUBETU()% nearby looks at the completely out of place pool.
			PRINTFORML As %PARSE("you begin")% washing, she stares at %PARSE("you",5)% like %PARSE("you're",1)% some kind of weirdo...
		ENDIF
	ENDIF
	
ENDIF
;-------------------------------------------------
;436,読書
;-------------------------------------------------
@MESSAGE_COM436
IF TARGET == 54 && TFLAG:194 == 1
	IF TFLAG:193 > 5 
		IF  CFLAG:TARGET:2 < 500
			PRINTFORML Fortunately, Patchouli isn't looking at %PARSE("you")%...
		ELSEIF !TALENT:TARGET:恋慕
				PRINTFORML For a moment, a look of scorn can be felt...
		ENDIF
	ELSEIF CFLAG:TARGET:2 > 500
		PRINTFORML While reading, %PARSE("you feel")% someone stare, and %PARSE("look")% up to see Patchouli looking at %PARSE("you",5)%.
		IF CFLAG:TARGET:2 < 1000
			PRINTFORML But, %HE_SHE(54)% averts %HIS_HER(54)% gaze.
		ELSE
			PRINTFORML Patchouli smiles at %PARSE("you")%.
		ENDIF
	ENDIF
ENDIF
SELECTCASE TFLAG:193
	CASE 1
		PRINTFORML %PARSE("You")% touched the deepest level of mystical karate.
	CASE 2
		PRINTFORML This isn't interesting at all...
	CASE 3
		PRINTFORML It was a bit more interesting that expected.
	CASE 4
		PRINTFORML This book requires some prior knowledge.
	CASE 5
		PRINTFORML Learned a couple of things.
	CASE 6
		PRINTFORML %PARSE("You")% feel an intense respect for %PARSE("your",1)% predecessors.
	CASE 7
		PRINTFORML %PARSE("You deepen")% %PARSE("your",1)% understanding of the female body.
	CASE 8
		PRINTFORML %PARSE("You start")% feeling a bit more lustful.
ENDSELECT
;addition custom code
CALL Add_SexED

;-------------------------------------------------
;440,待つ
;-------------------------------------------------
@MESSAGE_COM440
PRINTFORM %PARSE("You")% 
IF ((!IN_HOME(CFLAG:MASTER:現在位置) && !NOSAMES(CFLAG:MASTER:現在位置, 桜並木の鳥居, お地蔵通り, 広場, 霧の湖, 竹林入り口, 森の入り口, 中有の道, 麓の樹海, 九天の滝, 幻想風穴)) || (IN_HOME(CFLAG:MASTER:現在位置) && CHK_ENTRANCE(CFLAG:MASTER:現在位置, MAIN_MAP))) && !RAND:3
	PRINT 
	;場所分岐、場所別に複数パターンを
	SELECTCASE CFLAG:MASTER:現在位置
		CASE 桜並木の鳥居, P22参道
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time staring at the path leading to the shrine...
				DATAFORM %PARSE("spend")% some time sitting on the stairs to the shrine...
				DATAFORM %PARSE("let")% some time pass while listening to the noise from the shrine...
				DATAFORM %PARSE("think")% %PARSE("you see",1)% an animal run across the path leading to the shrine...
				DATAFORM %PARSE("kill")% some time counting the steps to the shrine, getting a different result each time...
			ENDDATA
		CASE お地蔵通り, P140お地蔵通り
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time visiting the Jizo statue...
				DATAFORM %PARSE("spend")% some time looking at all the pinwheels around the Jizo statue...
				DATAFORM %PARSE("spend")% some time talking with an old woman who came to visit the Jizo statue...
				DATAFORM %PARSE("spend")% some time looking at the faraway Myouren temple...
				DATAFORM %PARSE("think")% %PARSE("you see",1)% someone running by...
			ENDDATA
		CASE 広場, P201人里の門
			PRINTDATAL
				DATAFORM %PARSE("let")% some time pass while listening to the hustle and bustle of the street...
				DATAFORM %PARSE("spend")% some time looking at the people crossing the street...
				DATAFORM %PARSE("spend")% some time pondering how %PARSE("you",1)% can feel so alone despite being on a street full of people...
				DATAFORM %PARSE("wait")% in the square for someone to show up...
				DATAFORM %PARSE("look")% around for someone %PARSE("you think",1)% called out %PARSE("your",1)% name just now, but %PARSE("find")% nothing...
			ENDDATA
		CASE 霧の湖, P343湖畔
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time looking at the Scarlet Devil Mansion behind the gate...
				DATAFORM %PARSE("spend")% some time quietly looking at the lake...
				DATAFORM %PARSE("spend")% some time gazing at the Youkai Mountain towering in the distance...
				DATAFORM %PARSE("think")% %PARSE("you see",1)% something that looks like a person below the surface of the water, but %PARSE("pay")% it no mind...
				DATAFORM %PARSE("call")% out across the lake into the fog, and %PARSE("you think you",1)% hear a reply, but that might have been %PARSE("your",1)% imagination...
			ENDDATA
		CASE 竹林入り口, P447竹林入口
			PRINTDATAL
				DATAFORM %PARSE("kill")% some time digging for bamboo shoots... \@DAY:2 == 1 ? # Where are they...? \@
				DATAFORM %PARSE("let")% some time pass while listening to the sound the close ring of bamboo trees make when wind blows through the leafs...
				DATAFORM %PARSE("let")% some time pass while listening to the hustle and bustle of some rabbits inside...
				DATAFORM %PARSE("spend")% some time staring at the rolling fog drifting deep in the treeline...
				DATAFORM %PARSE("kill")% some time staring at some mushrooms fighting bamboo shoots for a place to grow. War is hell...
			ENDDATA
		CASE 森の入り口, P501魔法の森入り口
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time staring at the faroff Kourindou...
				DATAFORM %PARSE("feel")% like time slows down as %PARSE("you stare",1)% at the giant tree standing in the middle of the forest...
				DATAFORM %PARSE("kill")% some time peering into the forest full of Youkai...
				DATAFORM %PARSE("wonder")% if the mushrooms growing on the side of the road are edible, and time passes before %PARSE("you know",1)% it...
				DATAFORM %PARSE("kill")% some time staring at some mushrooms fighting bamboo shoots for a place to grow. War is hell...
			ENDDATA
		CASE 中有の道, P601中有の道
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time staring at Hakugyokurou towering on the other side of the river...
				DATAFORM %PARSE("spend")% some time watching the ferryboats lazily floating across the Sanzu river...
				DATAFORM %PARSE("stare")% at the river, and time flies...
				DATAFORM %PARSE("spend")% some tine counting the spirits crossing the river, and time flies by...
				DATAFORM %PARSE("decline")% an invitation from some spirits asking if %PARSE("you want",1)% to cross the river with them...
			ENDDATA
		CASE 麓の樹海, P701樹海道入り口
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time looking at the various trees %PARSE("you",1)% can see...
				DATAFORM %PARSE("spend")% some time looking at the various trees lining the river...
				DATAFORM %PARSE("listen")% to the noise of wind blowing past the trees...
				DATAFORM %PARSE("eavesdrop")% casually, listening to the pond, is that... The song of the frogs!? （%PARSE("You remain")% dumbfounded in surprise for a while）
				DATAFORM %PARSE("hear")% a mysterious voice coming from the forest, but decide to ignore it.
			ENDDATA
		CASE 九天の滝, P801山頂入り口
			PRINTDATAL
				DATAFORM %PARSE("take")% in the scenery while listening to the sound of the waterfall...
				DATAFORM %PARSE("kill")% some time gazing at the Moriya shrine at the top of the mountain...
				DATAFORM %PARSE("pass")% the time looking at how the scenery changes when moving from the foot to the summit of the mountain...
				DATAFORM %PARSE("look")% up trying wondering if %PARSE("you",1)% can see Heaven... Now %PARSE("your",1)% neck hurts...
				DATAFORM %PARSE("spend")% some time looking how the water splashes about in the basin under the waterfall...
			ENDDATA
		CASE 幻想風穴, P948縦穴の底
			PRINTDATAL
				DATAFORM %PARSE("spend")% some time looking out at the vast underworld...
				DATAFORM %PARSE("spend")% some time gazing at the Oni moving to and fro...
				DATAFORM %PARSE("spend")% some time looking at the Palace of the Earth Spirits a distance away... 
				DATAFORM %PARSE("spend")% some time getting chased by an evil spirit...
				DATAFORM %PARSE("spend")% some time looking at the limestone cavern stretching on and on...
			ENDDATA
		CASEELSE
			PRINTFORML %PARSE("spend")% some time doing nothing...
			;PRINTL 気が付くと時間が過ぎていた…
	ENDSELECT
ELSE
	;分岐込みでちょっと追加、一部そぐわないのもあるかもしれないですがご了承を。
	SELECTCASE RAND:3
		CASE 0,1
			;季節分岐
			IF DAY:2 == 1
				PRINT 
				;春
				PRINTDATAL
					DATAFORM %PARSE("chase")% a butterfly to kill time...
					DATAFORM %PARSE("pass")% the time looking at some flowers blooming on the roadside...
					DATAFORM %PARSE("pass")% the time basking in the pleasant spring atmosphere...
					DATAFORM %PARSE("kill")% some time by counting how many migratory birds %PARSE("you",1)% can see...
				ENDDATA
			ELSEIF DAY:2 == 2
				;夏
				PRINTDATAL
					DATAFORM %PARSE("spend")% some time listening to the cicadas...
					DATAFORM %PARSE("spend")% some time in the shade, wiping off sweat...
					DATAFORM %PARSE("kill")% some time listening to various bird cries, dollarbirds, eurasian scops owls, and others...
					DATAFORM %PARSE("spend")% some time, there's a sudden downpour but it disappears just as quickly...
				ENDDATA
			ELSEIF DAY:2 == 3
				;秋
				PRINTDATAL
					DATAFORM %PARSE("spend")% some time chasing dragonflies...
					DATAFORM %PARSE("kill")% some time looking at the autumn colors of distant mountains...
					DATAFORM %PARSE("kill")% some time staring at dead leafs dancing in the wind...
					DATAFORM %PARSE("spend")% some time watching a bear catch salmon from a river a distance away...
				ENDDATA
			ELSEIF DAY:2 == 4
				PRINT 
				;冬
				PRINTDATAL
					DATAFORM %PARSE("kill")% some time, rubbing %PARSE("your",1)% hands together and blowing on them to retain warmth...
					DATAFORM %PARSE("kill")% some time stepping on ice needles...
					DATAFORM %PARSE("walk")% around for a bit before %PARSE("you slip",1)% and %PARSE("fall")% on the ice...
					DATAFORM %PARSE("spend")% some time looking around for small animal footprints...
				ENDDATA
			ENDIF
		CASE 2
			PRINT 
			;その他の分岐
			;雲／雨／雪の何れかのフラグあり
			IF GETBIT(TIME:5,3) || GETBIT(TIME:5,2) || GETBIT(TIME:5,1)
				PRINTFORML %PARSE("kill")% some time making a poem...
			;秋限定
			ELSEIF TIME:2 >= 5 && TIME:2 <= 7
				PRINTFORML %PARSE("kill")% some time looking at the stars...
			ELSE
				PRINTFORML %PARSE("kill")% some time looking at the clouds...
			ENDIF
		CASEELSE
			;保険
			PRINTFORML %PARSE("spend")% some time doing nothing...
			;PRINTL 気が付くと時間が過ぎていた…
	ENDSELECT
ENDIF
;-------------------------------------------------
;441,授業を受ける
;-------------------------------------------------
@MESSAGE_COM441
PRINTFORM %PARSE("You decide")% to attend a lesson
IF TARGET > 0
	
ENDIF
IF TARGET > 0
	IF ABL:MASTER:教養 > ABL:TARGET:教養
		PRINTFORM  with %CALLNAME:TARGET%, getting help from them occasionally
	ELSE
		PRINTFORM  with %CALLNAME:TARGET%, helping them occasionally
	ENDIF
ENDIF
PRINTL .
SIF ABL:MASTER:教養 > 2 && TARGET > 0
	PRINTFORM %CALLNAME:TARGET% is impressed with %PARSE("your",1)% knowledge.
SIF ABL:MASTER:教養 < ABL:TARGET:教養 - 2
	PRINTFORM %CALLNAME:TARGET%'s teachings were really useful.
	



;-------------------------------------------------
;442,伐採する
;-------------------------------------------------
@MESSAGE_COM442



;-------------------------------------------------
;445,採集する
;-------------------------------------------------
@MESSAGE_COM445

SELECTCASE TFLAG:193
	CASE 0
		PRINTFORML %PARSE("You don't")% find anything...
	CASEELSE
		SETCOLOR 0x00FF00
		PRINTFORM %PARSE("You find")% 
		IF TFLAG:194 > 1 
			PRINTFORM {TFLAG:194} 
		ELSE
			PRINTFORM 1 
		ENDIF
		IF GROUPMATCH(TFLAG:193, 706)
			PRINTFORM 
		ELSE
			PRINTFORM 
		ENDIF
		PRINTFORML %ITEMNAME_TR(TFLAG:193)%! （{ITEM:(TFLAG:193) - TFLAG:194}→{ITEM:(TFLAG:193)}）
		RESETCOLOR
		DRAWLINE
		PRINTFORM   
		CALL ITEM_DESCRIPTION(TFLAG:193)
ENDSELECT

;-------------------------------------------------
;446,調合する
;-------------------------------------------------
@MESSAGE_COM446

SELECTCASE TFLAG:193
	CASE 0

	CASEELSE
		PRINTFORM %PARSE("You make")% 
		SETCOLOR 0x00FF00
		IF TFLAG:194 > 1
			PRINTFORM {TFLAG:194}
		ELSE
			PRINTFORM 1
		ENDIF
		PRINTFORML  %ITEMNAME_TR(TFLAG:193)%.
		RESETCOLOR
		DRAWLINE
ENDSELECT
;-------------------------------------------------
;447,露店を開く
;-------------------------------------------------
@MESSAGE_COM447

SELECTCASE TFLAG:193
	CASE 0

	CASEELSE
		PRINTFORML Money %金額表示(MONEY - TFLAG:194)% → %金額表示(MONEY)%
ENDSELECT

;-------------------------------------------------
;448,罠を仕掛ける
;FLAG:194 はCRITTER_DATAを参照
;虫トラップのムシの名前はMUSHI_NAMEに入ってます
;-------------------------------------------------
@MESSAGE_COM448

SELECTCASE TFLAG:193
	;罠を仕掛けた
	CASE 0
		IF !TRAP_POINT:1 && !TRAP_POINT:2 && !TRAP_POINT:3
			
		ELSE
			PRINTFORML ◇Traps in place◇
			FOR LOCAL, 1, 4
				IF TRAP_POINT:LOCAL
					PRINTFORML 　%@"Trap No.{LOCAL} location", 18, LEFT%: %猟場名(TRAP_POINT:LOCAL)%
					PRINTFORML 　%@"Date set", 18, LEFT%: %PRINT_DATE_F(TRAP_SETUPDATA:LOCAL)%
				ENDIF
			NEXT
		ENDIF
	;獲物が得られた
	CASE 1
		SELECTCASE TFLAG:194
			;いわゆるまともな肉
			CASE 1 TO 12, 14, 18, 21, 22, 24
				PRINTFORML Yakiniku tonight!
			;兎と大物
			CASE 13, 15, 16, 17, 19, 27, 28
				PRINTFORML Maybe a hotpot, maybe grilled...
			CASE 20, 23, 25
				PRINTFORML With muscle texture like that, how do you even eat it?
			CASE 26;マタンゴ
				PRINTFORML These mushrooms seem dangerous, let's not eat them...
		ENDSELECT
	;罠が壊れていた
	CASE -1
		PRINTFORML %PARSE("You")% recovered the scattered parts of the trap...
	;虫トラップを仕掛けた
	CASE 10
		PRINTFORML %"Bait Used", 12, LEFT%：%ITEMNAME_TR(GET_MUSHIDATA(MUSHI_TRAP, "エサ番号"))%
		PRINTFORML %"Bait Quality", 12, LEFT%：%"☆" * MUSHI_ESA_DATA(GET_MUSHIDATA(MUSHI_TRAP, "エサ番号"))%
		PRINTFORML %"Bait Type", 12, LEFT%：%BAIT_TR(RESULTS:10, GET_MUSHIDATA(MUSHI_TRAP, "エサ番号"))%
		DRAWLINE
		PRINTFORML %PARSE("You set")% a bug trap %AT_IN_ON((GET_MUSHIDATA(MUSHI_TRAP, "場所")))%.
		PRINTFORML %PARSE("You")% should come back tomorrow and check it.
	;虫トラップを破棄した
	CASE 11
		PRINTFORML %PARSE("You retrieve")% the bug trap you placed %AT_IN_ON(CFLAG:MASTER:現在位置)%.
	;虫トラップで捕まえた
	CASE 12
		PRINTFORML %PARSE("You put")% away the bug trap.
ENDSELECT

;-------------------------------------------------
;449,虫捕り
;～を捕まえた！のメッセージはコマンド関数内で行われています
;ここで表示するのは追加メッセージです
;-------------------------------------------------
@MESSAGE_COM449
#DIM CHARA
CHARA = TFLAG:194
;殺してでもうばいとる
IF TFLAG:193 == -2
	;I think this is some kind of reference though
	PRINTL 
	PRINTFORML Wh-What the hell are you doing, you bastards?!
	PRINTW 
	PRINTFORML As %PARSE("you scuffle")% with %CALLNAME:CHARA% over the %MUSHI_NAME_TR(MUSHI_NAME)%, it ends up making a run for it...
;ゆずってくれ→拒否された
ELSEIF TFLAG:193 == -1
	PRINTFORML %CALLNAME:CHARA% refuses, saying that %HE_SHE(CHARA)% was the one who rightfully caught it...
;捕獲失敗
ELSEIF TFLAG:193 == 0
	PRINTFORML %PARSE("You")% found nothing...
;MASTERが捕まえた,追加メッセージ無し
ELSEIF TFLAG:193 == 1
;なかなかやるじゃん
ELSEIF TFLAG:193 == 2
	PRINTFORML %CALLNAME:CHARA% seems embarrassed by %PARSE("your")% praise, yet pleased with %HIMSELF_HERSELF(CHARA)%.
;ゆずってくれ→渋々オッケー
ELSEIF TFLAG:193 == 3
	PRINTFORML %CALLNAME:CHARA% looks speechless from seeing how desperate %PARSE("you are")%, before reluctantly parting with %HIS_HER(CHARA)% %MUSHI_NAME_TR(MUSHI_NAME)%.
;ゆずってくれ→オールオッケー
ELSEIF TFLAG:193 == 4
	PRINTFORML %CALLNAME:CHARA% beams with pride from seeing %PARSE("you")% beg for it, before handing over %HIS_HER(CHARA)% %MUSHI_NAME_TR(MUSHI_NAME)% that %PARSE("you want",1)% so badly.
ENDIF
;虫カゴに入れる処理,口上で地の文を消す場合はこの処理を忘れないように
SIF GROUPMATCH(TFLAG:193, 1, 3, 4)
	CALL MUSHI_CAPTURE(MUSHI_CAGE)

;-------------------------------------------------
;460,妄想オナニー
;-------------------------------------------------
@MESSAGE_COM460

SELECTCASE TCVAR:194
CASE 1
	PRINTFORML 時を止めたままでは精神にかかる負担が大きすぎる……
CASE 2
	PRINTFORML 人前でオナニーをしてはいけません
CASE 3
	PRINTFORML %CALLNAME:MASTER%は精神を集中させ、妄想で意中の人と性交する事にした
CASE 4
	PRINTFORML 今はまだオナニーすべき刻ではない……%CALLNAME:MASTER%はそう思い、オナニーを止めた……
ENDSELECT

;-------------------------------------------------
;461,我に返る - Delusional masturbation-related, disabled
;-------------------------------------------------
@MESSAGE_COM461
;IF (MAXBASE:MASTER:気力 / BASE:MASTER:気力) >= 10
;一割以下
IF BASE:MASTER:気力 <= (MAXBASE:MASTER:気力 / 10)
	PRINTFORML 疲れきった%CALLNAME:MASTER%はオナニーを止めた
	SIF TALENT:MASTER:2 == 2
		PRINTFORML %CALLNAME:MASTER%の手とペニスには精液がこびりつき、辺りに生臭い臭いが充満している……
	SIF TALENT:MASTER:2 == 1
		PRINTFORML %CALLNAME:MASTER%の体は愛液に塗れ、辺りに雌の匂いが充満している……
	SIF TALENT:MASTER:2 == 3
		PRINTFORML %CALLNAME:MASTER%は全身愛液と精液塗れで見るも無残な姿だ……
;ELSEIF (MAXBASE:MASTER:気力 / BASE:MASTER:気力) >= 2
;半分以下
ELSEIF BASE:MASTER:気力 <= (MAXBASE:MASTER:気力 / 2)
	PRINTFORML %CALLNAME:MASTER%はほどほどのところでオナニーを止めた
	SIF TALENT:MASTER:2 == 2
		PRINTFORML %CALLNAME:MASTER%の手とペニスには精液がこびりつき、辺りに生臭い臭いが漂っている……
	SIF TALENT:MASTER:2 == 1
		PRINTFORML %CALLNAME:MASTER%の体は愛液に塗れ、辺りに雌の匂いが漂っている……
	SIF TALENT:MASTER:2 == 3
		PRINTFORML %CALLNAME:MASTER%は体には至る所に精液と愛液がこびりついている……
ELSE
	PRINTFORML %CALLNAME:MASTER%はまだ余裕があるが体を気遣ってオナニーを止めた
	SIF TALENT:MASTER:2 == 2
		PRINTFORML %CALLNAME:MASTER%の手とペニスにはほんの僅かな我慢汁が付着している……
	SIF TALENT:MASTER:2 == 1
		PRINTFORML %CALLNAME:MASTER%の体にはほんの僅かな愛液が付着している……
	SIF TALENT:MASTER:2 == 3
		PRINTFORML %CALLNAME:MASTER%の体には僅かな我慢汁と愛液が付着している……
ENDIF
PRINTFORML %CALLNAME:MASTER%は少し悲しくなった

;-------------------------------------------------
;483,ムシバトル
;-------------------------------------------------
@MESSAGE_COM483
PRINTFORML You and the others relive the innocence of youth through your fierce bug fight.
SELECTCASE TFLAG:193
;タイマン
CASE 1
	;勝った
	IF TFLAG:194 == 1
		PRINTFORML You bask in the thrill of victory over %CALLNAME:TARGET%...
	ELSE
		PRINTFORML You fall to your knees in humiliation before %CALLNAME:TARGET%'s bugs...
	ENDIF
;バトルロイヤル
CASE 2
	;勝った
	IF TFLAG:194 == 1
		PRINTFORML You give your victorious bugs a generous reward...
	ELSE
		PRINTFORML You comfort and thank your defeated bugs...
	ENDIF
;チーム戦
CASE 3
	;勝った
	IF TFLAG:194 == 1
		PRINTFORML You share the thrill of victory with your comrade %CALLNAME:TARGET%...
	ELSE
		PRINTFORML You exchange thanks and consolations with your comrade %CALLNAME:TARGET%...
	ENDIF
ENDSELECT

;-------------------------------------------------
;484,スイカ割り
;-------------------------------------------------
@MESSAGE_COM484
CLEARLINE 1
PRINTL 
IF TFLAG:193 == 2
	PRINTFORML .........
	PRINTFORMW You swing your %SUIKA_WEAPON_TR(SUIKA_WEAPON)% like a real sword, and for a few moments there is a silence as if time has stopped...
	PRINTFORML %BREAKENG(@"Amidst the tension in the air, you make a sudden motion to sheathe your sword, and suddenly, the Watermelon cracks open like a blossoming flower, beautifully sliced into equal portions!")%
ELSEIF TFLAG:193 == 1
	PRINTFORML You swing a blow that hits the precise point of your mark, and as you take off your blindfold, you see a beautifully split Watermelon before you!
ELSEIF TFLAG:193 == 0
	PRINTFORML Your swing barely connects, and as you remove your blindfold, you see an awkwardly cracked Watermelon in front of you!
ELSEIF TFLAG:193 < 0
	PRINTFORMW .........
	PRINTDATAL
		DATAFORM A fairy appears out of nowhere, takes the Watermelon that you couldn't split open, and leaves...
		DATAFORM All of a sudden, a mysterious gap appears, and the Watermelon that you couldn't split open gets sucked into it...
		DATAFORM Suddenly the watermelon that you couldn't split open starts tumbling before disappearing off into the distance...
	ENDDATA
ENDIF
IF TFLAG:193 >= 0
	PRINTL 
	CALL COLORMESSAGE("You acquire a【Cut Watermelon】!", C_AQUA, 1)
ENDIF